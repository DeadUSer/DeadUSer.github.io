<!DOCTYPE html>
<html>

<body>
	<p>Count numbers: <output id="result"></output></p>
	<button onclick="startWorker()">Start Worker</button>
	<button onclick="stopWorker()">Stop Worker</button>
</script>


</body>

<script id="worker1">
	var i = 0;
	function timedCount() {
		i = i + 1;
		postMessage(i);
		setTimeout("timedCount()", 500);
	}
	timedCount();
</script>

<script>
	var w;

	var blob = new Blob([document.querySelector('#worker1').textContent], { type: "text/javascript" })

	function startWorker() {
		if (typeof (Worker) !== "undefined") {
			if (typeof (w) == "undefined") w = new Worker(window.URL.createObjectURL(blob));
			w.onmessage = event => document.getElementById("result").innerHTML = event.data;
		} else {
			document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Workers...";
		}
	}

	function stopWorker() {
		w.terminate();
		w = undefined;
	}
</script>


</html>